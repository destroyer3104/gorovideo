<!-- Unicode UTF-8 シグネチャ無し で空白が消える -->
<style>
	.play.play-full{

	width:100%;
	height:auto;

	}

	.play.play-hidden .menu{

	visibility : hidden;

	}

	.play .item{

	position: relative;
	display: table;
	height:50%;

	}

	.play .menu,.play .drop{

	background-color: black;
	color: white;

	}

	.play .menu p{

	/*display:table>display:table-cell(text-align:center;vertical-align:middle;)*/
	display:table-cell;
	vertical-align:middle;
	text-align:center;
	font-size: 10px;

	}

	.play:not(.play-paused) .menu p.play-stop,.play.play-paused .menu p.play-play,
	.play:not(.play-full) .menu p.play-full,.play.play-full .menu p.play-rect{
	display:none;
	}

	.play .drop{

	position: absolute;
	height:100%;
	bottom: 100%;
	right: 0;
	left: 0;

	}

	.play .drop-hidden{

	display : none;

	}

	.play .progresspos{

	position:absolute;
	display:block;
	top:0; left:0; bottom:0;

	background-color: white;

	}

	.play .over p{

	position:absolute;

	color:white;
	white-space:nowrap;
	font-size: 3vw;

	animation-duration:5s;
	animation-timing-function:linear;
	animation-fill-mode:both;

	left:100%;

	}

	.play.play-paused .over p{

	animation-play-state: paused;

	}
	@keyframes left{
	/* 両端隠蔽opacity:0&animation-fill-mode:both */
000%{left:100%;transform:translateX(-000%);}
001%{left:100%;transform:translateX(-000%);}
099%{left:000%;transform:translateX(-100%);}
100%{left:000%;transform:translateX(-100%);}
}
</style>
<div class="play" style="position:relative;cursor:default;">
	<video poster="{{main.icon}}" style="width:100%;height:auto;" id="doga">
		{%if main.size == 1 %}<source src="/blob/{{main.blob.0}}" name='original'/>{%endif%}
		{%if main.size == 2 %}<source src="/blob/{{main.blob.0}}" name='360p'/><source src="/blob/{{main.blob.1}}" name='720p'/>{%endif%}
	</video>
	<div class='over' style="position: absolute;top: 0;bottom: 0;right: 0;left: 0;overflow:hidden;" id="over">
{% for i in rice%}
		<p time="{{i.tpos}}">{{i.text}}</p>
{% endfor %}
	</div>
	<div class="menu" style="position:absolute;display:table-cell;height:30px;bottom:0;right:0;left: 0;">
		<div class="item progressbar" style="width:100%">
			<div class="progresslen" style="position:absolute;display:block;top:40%;left:0;bottom:40%;right:0;background-color:grey;">
				<div class="progresspos" style="color:white;height:100%;">
				</div>
			</div>
		</div>
		<div class="item button" style="float:left;width:50px;">
			<p class="play-stop">▶</p>
			<p class="play-play">||</p>
		</div>
		<div class="item time" style="float:left;width:50px;">
			<p></p>
		</div>
		<div class="item full" style="float:right;width:50px;">
			<p class="play-rect">■</p>
			<p class="play-full">▣</p>
		</div>
		<div class="item source" style="float:right;width:50px;">
			<p></p>
		</div>
	</div>
</div>
<script src="/jquery.min.js"></script>
<script src="/player.js"></script>
<script>
function flow(){
	list=[5, 9, 4, 8, 0, 3, 6, 1, 2, 7]
	rice=$("#over p")
	rice.css("animation-name","")
	setTimeout(function(){
		rice.each(function(i,m){
			$(m).css({
				"animation-name":"left",
				"animation-delay":(parseFloat($(m).attr("time"))-$("#doga")[0].currentTime)+"s",
				"position":"absolute",
				"top":(list[i%list.length]/list.length*80)+"%"
			})
		})
	},10);
}
myplayer($(".play"),{
	update:flow
})
</script>